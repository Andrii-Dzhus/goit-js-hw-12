{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '44774243-c5238725a8321193973133c91';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get('', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<div class=\"photo-card\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n            <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n            <p class=\"info-item\"><b>Views</b> ${views}</p>\n            <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n            <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n          </div>\n        </div>`\n    )\n    .join('');\n  gallery.innerHTML += markup; // додаємо нові зображення до існуючих\n\n  new SimpleLightbox('.photo-card a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  }).refresh();\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.style.display = 'none';\ndocument.body.appendChild(loadMoreBtn);\n\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.searchQuery.value.toLowerCase();\n\n  if (query === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query!',\n    });\n    return;\n  }\n\n  page = 1; // скидаємо номер сторінки для нового пошукового запиту\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none'; // ховаємо кнопку під час нового запиту\n\n  await fetchAndRenderImages();\n}\n\nasync function onLoadMore() {\n  page += 1;\n  await fetchAndRenderImages();\n  smoothScroll();\n}\n\nasync function fetchAndRenderImages() {\n  loader.style.display = 'block';\n  try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderGallery(data.hits);\n      loadMoreBtn.style.display =\n        data.hits.length < data.totalHits ? 'block' : 'none'; // показати/сховати кнопку \"Load more\"\n      if (data.totalHits <= page * 15) {\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMoreBtn.style.display = 'none';\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["apiKey","axios","fetchImages","query","page","perPage","error","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","loader","loadMoreBtn","onSearch","onLoadMore","event","iziToast","fetchAndRenderImages","smoothScroll","data","cardHeight"],"mappings":"owBAEA,MAAMA,EAAS,qCACfC,EAAM,SAAS,QAAU,2BAElB,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAYF,OAXiB,MAAMJ,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,GACe,IACjB,OAAQC,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACH,CCnBO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,qBACaL,CAAa;AAAA,wBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,gDAGFC,CAAK;AAAA,gDACLC,CAAK;AAAA,mDACFC,CAAQ;AAAA,oDACPC,CAAS;AAAA;AAAA,eAGxD,EACA,KAAK,EAAE,EACVR,EAAQ,WAAaC,EAErB,IAAIQ,EAAe,gBAAiB,CAClC,aAAc,MACd,aAAc,GAClB,CAAG,EAAE,QAAO,CACZ,CC7BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CV,EAAU,SAAS,cAAc,UAAU,EAC3CW,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,MAAM,QAAU,OAC5B,SAAS,KAAK,YAAYA,CAAW,EAErC,IAAIlB,EAAQ,GACRC,EAAO,EAEXe,EAAK,iBAAiB,SAAUG,CAAQ,EACxCD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAI7B,GAHAA,EAAM,eAAc,EACpBrB,EAAQqB,EAAM,cAAc,SAAS,YAAY,MAAM,cAEnDrB,IAAU,GAAI,CAChBsB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDrB,EAAO,EACPK,EAAQ,UAAY,GACpBY,EAAY,MAAM,QAAU,OAE5B,MAAMK,EAAoB,CAC5B,CAEA,eAAeH,GAAa,CAC1BnB,GAAQ,EACR,MAAMsB,EAAoB,EAC1BC,GACF,CAEA,eAAeD,GAAuB,CACpCN,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMQ,EAAO,MAAM1B,EAAYC,EAAOC,CAAI,EACtCwB,EAAK,KAAK,SAAW,EACvBH,EAAS,KAAK,CACZ,MAAO,OACP,QACE,0EACV,CAAO,GAEDlB,EAAcqB,EAAK,IAAI,EACvBP,EAAY,MAAM,QAChBO,EAAK,KAAK,OAASA,EAAK,UAAY,QAAU,OAC5CA,EAAK,WAAaxB,EAAO,KAC3BqB,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACnB,CAAS,EACDJ,EAAY,MAAM,QAAU,QAGjC,OAAQf,EAAO,CACdmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBAAyBnB,EAAM,OAAO,EACrD,CAAK,CACL,QAAY,CACRc,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASO,GAAe,CACtB,KAAM,CAAE,OAAQE,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}